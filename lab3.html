<!DOCTYPE html>
<html lang="ru">

<head>
<!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
	<link rel="stylesheet" href="style.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Orbitron " rel="stylesheet">

</head>

<body>

<header>
      <!-- Fixed navbar -->
      <nav class="navbar navbar-dark fixed-top bg-dark">
        <a class="navbar-brand" href="#">Лабораторная работа №3</a>
        <form class="form-inline">
			<input type="text" placeholder="Поиск" aria-label="Поиск">
			<button class="btn btn-outline-success" type="submit">Поиск</button>
		</form>
      </nav>
    </header>

    <!-- Begin page content -->
    <main role="main" class="container">
      <h1 class="mt-5">Задание</h1>
      <p class="lead">Добавьте на страницу JavaScript код, который будет обрабатывать нажатие кнопок выставления и очистки оценок, а также код для кнопки подсчета средней оценки по группе.</p>
      <p>Алгоритм такой - при нажатии на кнопку оценки выбираем элементы класса <code>rating</code> на странице и присваиваем их свойству <code>value</code> значение требуемой оценки. Далее при нажатии на кнопку подсчета средней оценки опять выбираем все элементы класса <code>rating</code> и суммируем значение их свойства <code>value</code>, а в конце делим на общее число оценок. Далее выбираем элемент с идентификатором <code>avegage</code> и вызываем у него функцию <code>text</code>, в которую посылаем полученной среднее значение</p>
      <p>Подсказки: 
      	<p>Обратиться к какому-либо элементу страницы по идентификатору:<code>$("#id_элемента")</code></p>
      	<p>Обратиться к группе элементов страницы по названию класса:<code>$(".class_элементов")</code></p>
      	<p>Присвоить полю ввода значение:<code>переменная_поля.value = "123"</code></p>
      	<p>Преобразовать строковые данные в данные типа int:<code>parseInt("123", 10)</code></p>
      	<p>Перебрать все элементы массива:<code>for(var i = 0;i<переменная_массива.length;i++) переменная_массива[i].value = "5"; });</code></p>

      	<p>Привязать выполнение кода к нажатию кнопки:<code>    		  $("#id_элемента").click(function(){
//код, выполняющийся при нажатии элемента
			  });</code></p>
  		</p>
  	</p>

      <button type="button" id="button_5" class="btn btn-success">Всем 5</button>
      <button type="button" id="button_4" class="btn btn-info">Всем 4</button>
      <button type="button" id="button_3" class="btn btn-warning">Всем 3</button>
      <button type="button" id="button_2" class="btn btn-danger">Всем 2</button>
      <button type="button" id="clean_mark"class="btn btn-primary tt">Очистить оценки</button>

      	<table class="table">
		  <thead>
		    <tr>
		      <th scope="col">№</th>
		      <th scope="col">ФИО</th>
		      <th scope="col">Оценка за экзамен</th>
		    </tr>
		  </thead>
		  <tbody class="Tbody">
		  </tbody>
		</table>
		<button type="button" id="button_avg" class="btn btn-primary bb" data-bs-toggle="modal" data-bs-target="#exampleModal">Подсчитать средний балл</button>

		<!-- Modal -->
		<div class="modal fade" id="exampleModal" tabindex="-1" aria-bs-labelledby="exampleModalLabel" aria-bs-hidden="true">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Средняя оценка по группе:</h5>
		      </div>
		      <div class="modal-body" id="average">
		        ...
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
		      </div>
		    </div>
		  </div>
		</div>
    </main>

    <footer class="footer">
		<div class="calculator">
			<form name="form">
				<input class="inputDisplay">
			</form>
			<table>
				<tr>
					<td><input type="button" value="C" onclick="clearInput()" style = "background-color: red"></td>
					<td><input type="button" value="<" onclick="deleteCharacter()"></td>
					<td><input type="button" value="/" onclick="insertCharacter('/')"></td>
					<td><input type="button" value="x" onclick="insertCharacter('*')"></td>
				</tr>
				<tr>
					<td><input type="button" value="7" onclick="insertCharacter(7)"></td>
					<td><input type="button" value="8" onclick="insertCharacter(8)"></td>
					<td><input type="button" value="9" onclick="insertCharacter(9)"></td>
					<td><input type="button" value="-" onclick="insertCharacter('-')"></td>
				</tr>
				<tr>
					<td><input type="button" value="4" onclick="insertCharacter(4)"></td>
					<td><input type="button" value="5" onclick="insertCharacter(5)"></td>
					<td><input type="button" value="6" onclick="insertCharacter(6)"></td>
					<td><input type="button" value="+" onclick="insertCharacter('+')"></td>
				</tr>
				<tr>
					<td><input type="button" value="1" onclick="insertCharacter(1)"></td>
					<td><input type="button" value="2" onclick="insertCharacter(2)"></td>
					<td><input type="button" value="3" onclick="insertCharacter(3)"></td>
					<td rowspan=2><input type="button" value="=" onclick="result()"  style="height: 158px; background-color: green"></td>
				</tr>
				<tr>
					<td colspan="2"><input type="button" value="0" onclick="insertCharacter(0)" style="width: 158px; ;"></td>
					<td><input type="button" value="." onclick="insertCharacter('.')"></td>
				</tr>
			</table>
		</div>>


		
    </footer>

	<script type="text/javascript" src="functionalities.js"></script>
	<script src="main.js"></script>
    <script src="code.jquery.com_jquery-3.7.1.min.js"></script>
    <!-- JavaScript Bundle with Popper -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script>
		var students = [ "Иванов Иван Иванович", 
    		"Петров Петр Петрович", 
    		"Сидоров Сидор Сидорович",
    		"Сидоров Сидор Сидорович","Сидоров Сидор Сидорович"
    		 ];
    	$( document ).ready(function() {
    		
    		for (var i = 0; i < students.length; i++) {
    			
    			$(".Tbody").append("<tr><th scope='row'>"+ (i + 1) +"</th><td>"+ students[i] +"</td><td><input class='rating'  type='text' placeholder='Балл'></tr>")
    		}

		});
    </script>
	<script>
		
		$('#button_5').click(function(){
			$('.rating').val(5)	
	}
		);
		$('#button_4').click(function(){
			$('.rating').val(4)	
	}
		);
		$('#button_3').click(function(){
			$('.rating').val(3)	
	}
		);
		$('.btn-danger').click(function(){
			$('.rating').val(2)	
	}
		);
		$('.tt').click(function(){
			$('.rating').val('')	
	}
		);
		$('.bb').click(function(){
			var ratings = 0;
 			 $('.rating').each(function() {
   			ratings += Number($(this).val());
			   summ = (ratings/students.length);
  			});
  			$('#average').text(summ);
		});
		
	</script>
	<script>
	
	function deleteCharacter() {
	let currentValue = $('.inputDisplay').val();
	$('.inputDisplay').val(currentValue.substring(0, currentValue.length - 1));
}
function insertCharacter(char) {
	let currentValue = $('.inputDisplay').val();
	let length = currentValue.length;
	let flag = false;
	if(char == '+' || char == '-' || char == '*' || char == '/')
	flag = true;
	if(length == 0)
	{
		if(flag)
		return;
	}
	let flagNew = false;
	let lastCharacter = currentValue[length-1];
	if(lastCharacter == '+' || lastCharacter == '-' || lastCharacter == '*' || lastCharacter == '/')
	flagNew = true;
	if(flag && flagNew)
	$('.inputDisplay').val(currentValue.substring(0,length-1) + char);
	else
	$('.inputDisplay').val($('.inputDisplay').val() + char);
}
function clearInput() {
	$('.inputDisplay').val('');
}
function result() {
	let currentValue = $('.inputDisplay').val();
	let length = currentValue.length;
	let flag = false;
	let char = currentValue[length-1];
	if(char == '+' || char == '-' || char == '*' || char == '/')
	flag = true;
	if(flag)
		$('.inputDisplay').val("ERROR!");
	else
		$('.inputDisplay').val(eval($('.inputDisplay').val()));
}
	

	</script>


<script>
	
	

</script>
</body>

</html>